<?xml version="1.0"?>
<!DOCTYPE module PUBLIC
    "-//Checkstyle//DTD Checkstyle Configuration 1.3//EN"
    "https://checkstyle.org/dtds/configuration_1_3.dtd">

<!--
    BCSDLab Backend Coding Convention v1.0
    Referenced by Naver coding convention for Java (version 1.2)
    https://naver.github.io/hackday-conventions-java/
-->

<module name="Checker">
    <property name="charset" value="UTF-8"/>
    <property name="severity" value="error"/>
    <property name="fileExtensions" value="java"/>

    <!-- 파일당 최대 줄 길이 -->
    <module name="LineLength">
        <property name="max" value="120"/>
        <property name="ignorePattern" value="^package.*|^import.*|a href|href|http://|https://|ftp://"/>
    </module>

    <!-- 파일 끝에 새 줄 -->
    <module name="NewlineAtEndOfFile">
        <property name="lineSeparator" value="lf"/>
    </module>

    <!-- 탭 문자 금지 (스페이스 4칸 사용) -->
    <module name="FileTabCharacter">
        <property name="eachLine" value="true"/>
    </module>

    <module name="TreeWalker">

        <!-- ========================================== -->
        <!-- 1. 네이밍 규칙 -->
        <!-- ========================================== -->

        <!-- 패키지명: 소문자만 사용 -->
        <module name="PackageName">
            <property name="format" value="^[a-z]+(\.[a-z][a-z0-9]*)*$"/>
            <message key="name.invalidPattern"
                     value="패키지명 ''{0}''은 소문자만 사용해야 합니다."/>
        </module>

        <!-- 클래스/인터페이스명: PascalCase -->
        <module name="TypeName">
            <property name="format" value="^[A-Z][a-zA-Z0-9]*$"/>
            <message key="name.invalidPattern"
                     value="타입명 ''{0}''은 PascalCase를 따라야 합니다."/>
        </module>

        <!-- 메소드명: camelCase, 'check' 시작 금지 -->
        <module name="MethodName">
            <property name="format" value="^(?!check)[a-z][a-zA-Z0-9]*$"/>
            <message key="name.invalidPattern"
                     value="메소드명 ''{0}''은 camelCase를 따라야 하며, 'check'로 시작할 수 없습니다. is/has/exists/validate/require를 사용하세요."/>
        </module>

        <!-- 멤버 변수명: camelCase -->
        <module name="MemberName">
            <property name="format" value="^[a-z][a-zA-Z0-9]*$"/>
            <message key="name.invalidPattern"
                     value="멤버 변수명 ''{0}''은 camelCase를 따라야 합니다."/>
        </module>

        <!-- 파라미터명: camelCase -->
        <module name="ParameterName">
            <property name="format" value="^[a-z][a-zA-Z0-9]*$"/>
            <message key="name.invalidPattern"
                     value="파라미터명 ''{0}''은 camelCase를 따라야 합니다."/>
        </module>

        <!-- 지역 변수명: camelCase -->
        <module name="LocalVariableName">
            <property name="format" value="^[a-z][a-zA-Z0-9]*$"/>
            <message key="name.invalidPattern"
                     value="지역 변수명 ''{0}''은 camelCase를 따라야 합니다."/>
        </module>

        <!-- 상수명: UPPER_SNAKE_CASE -->
        <module name="ConstantName">
            <property name="format" value="^[A-Z][A-Z0-9]*(_[A-Z0-9]+)*$"/>
            <message key="name.invalidPattern"
                     value="상수명 ''{0}''은 UPPER_SNAKE_CASE를 따라야 합니다."/>
        </module>

        <!-- ========================================== -->
        <!-- 2. Import 규칙 -->
        <!-- ========================================== -->

        <!-- * import 금지 -->
        <module name="AvoidStarImport">
            <property name="allowStaticMemberImports" value="true"/>
        </module>

        <!-- 사용하지 않는 import 금지 -->
        <module name="UnusedImports"/>

        <!-- 중복 import 금지 -->
        <module name="RedundantImport"/>

        <!-- ========================================== -->
        <!-- 3. 코드 포맷팅 -->
        <!-- ========================================== -->

        <!-- 들여쓰기: 4칸 -->
        <module name="Indentation">
            <property name="basicOffset" value="4"/>
            <property name="braceAdjustment" value="0"/>
            <property name="caseIndent" value="4"/>
            <property name="throwsIndent" value="4"/>
            <property name="lineWrappingIndentation" value="4"/>
            <property name="arrayInitIndent" value="4"/>
        </module>

        <!-- 빈 줄 관리 -->
        <module name="EmptyLineSeparator">
            <property name="allowNoEmptyLineBetweenFields" value="true"/>
            <property name="allowMultipleEmptyLines" value="false"/>
            <property name="allowMultipleEmptyLinesInsideClassMembers" value="false"/>
        </module>

        <!-- 연속된 빈 줄 제한 (최대 1줄) -->
        <module name="EmptyLineSeparator">
            <property name="allowMultipleEmptyLines" value="false"/>
        </module>

        <!-- 중괄호 위치 -->
        <module name="LeftCurly">
            <property name="option" value="eol"/>
        </module>

        <module name="RightCurly">
            <property name="option" value="alone"/>
        </module>

        <!-- 중괄호 필수 (if, else, for, do, while) -->
        <module name="NeedBraces">
            <property name="allowSingleLineStatement" value="false"/>
        </module>

        <!-- 공백 규칙 -->
        <module name="WhitespaceAround">
            <property name="allowEmptyConstructors" value="true"/>
            <property name="allowEmptyMethods" value="true"/>
            <property name="allowEmptyTypes" value="true"/>
            <property name="allowEmptyLoops" value="true"/>
        </module>

        <module name="WhitespaceAfter">
            <property name="tokens" value="COMMA, SEMI"/>
        </module>

        <!-- Type cast 후 공백 없음 -->
        <module name="TypecastParenPad">
            <property name="option" value="nospace"/>
        </module>

        <module name="NoWhitespaceAfter">
            <property name="tokens" value="TYPECAST"/>
        </module>

        <!-- 괄호 내부 공백 없음 -->
        <module name="ParenPad">
            <property name="option" value="nospace"/>
        </module>

        <!-- 한 줄에 하나의 statement -->
        <module name="OneStatementPerLine"/>

        <!-- 한 파일에 하나의 최상위 클래스 -->
        <module name="OneTopLevelClass"/>

        <!-- ========================================== -->
        <!-- 4. 코딩 스타일 -->
        <!-- ========================================== -->

        <!-- 빈 블록 체크 -->
        <module name="EmptyBlock">
            <property name="option" value="text"/>
        </module>

        <!-- 빈 catch 블록 금지 -->
        <module name="EmptyCatchBlock">
            <property name="exceptionVariableName" value="expected|ignore"/>
        </module>

        <!-- 배열 선언 스타일: Java 스타일 (String[] args) -->
        <module name="ArrayTypeStyle"/>

        <!-- 긴 상수는 L 대문자 사용 -->
        <module name="UpperEll"/>

        <!-- modifier 순서 -->
        <module name="ModifierOrder"/>

        <!-- 불필요한 괄호 제거 -->
        <module name="UnnecessaryParentheses"/>

        <!-- equals() 좌변에 상수 사용 금지 (Yoda 조건 금지) -->
        <module name="EqualsAvoidNull"/>

        <!-- String 비교는 equals 사용 -->
        <module name="StringLiteralEquality"/>

        <!-- 중복 코드 체크 -->
        <module name="SimplifyBooleanExpression"/>
        <module name="SimplifyBooleanReturn"/>

        <!-- finalize() 메소드 금지 -->
        <module name="NoFinalizer"/>

        <!-- ========================================== -->
        <!-- 5. 어노테이션 -->
        <!-- ========================================== -->

        <!-- 어노테이션 위치 -->
        <module name="AnnotationLocation">
            <property name="allowSamelineMultipleAnnotations" value="false"/>
            <property name="allowSamelineSingleParameterlessAnnotation" value="false"/>
            <property name="allowSamelineParameterizedAnnotation" value="false"/>
        </module>

        <!-- ========================================== -->
        <!-- 6. 기타 -->
        <!-- ========================================== -->

        <!-- 매직 넘버 금지 -->
        <module name="MagicNumber">
            <property name="ignoreNumbers" value="-1, 0, 1, 2"/>
            <property name="ignoreHashCodeMethod" value="true"/>
            <property name="ignoreAnnotation" value="true"/>
            <property name="ignoreFieldDeclaration" value="true"/>
        </module>

        <!-- TODO/FIXME 주석 경고 -->
        <module name="TodoComment">
            <property name="severity" value="warning"/>
            <property name="format" value="(TODO)|(FIXME)"/>
        </module>

    </module>
</module>
